(function(e){function t(t){for(var r,s,i=t[0],c=t[1],u=t[2],l=0,p=[];l<i.length;l++)s=i[l],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&p.push(o[s][0]),o[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);d&&d(t);while(p.length)p.shift()();return n.push.apply(n,u||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],r=!0,i=1;i<a.length;i++){var c=a[i];0!==o[c]&&(r=!1)}r&&(n.splice(t--,1),e=s(s.s=a[0]))}return e}var r={},o={app:0},n=[];function s(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=r,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(a,r,function(t){return e[t]}.bind(null,r));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var d=c;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"5c0b":function(e,t,a){"use strict";var r=a("9c0c"),o=a.n(r);o.a},6582:function(e,t,a){e.exports=a.p+"img/edit.eea18703.svg"},"7e76":function(e,t,a){"use strict";var r=a("92a5"),o=a.n(r);o.a},"92a5":function(e,t,a){},"9c0c":function(e,t,a){},c6e7:function(e,t,a){"use strict";var r=a("f2c3"),o=a.n(r);o.a},cd49:function(e,t,a){"use strict";a.r(t);a("fb6a"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},n=[],s=(a("5c0b"),a("2877")),i={},c=Object(s["a"])(i,o,n,!1,null,null,null),u=c.exports,d=a("8c4f"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"home"}},[a("div",{staticClass:"col"},[a("label",{attrs:{for:"new-user"}},[e._v("Add a Reader:")]),a("div",{staticClass:"flex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.readerName,expression:"readerName"}],attrs:{type:"text",placeholder:"Reader Name..."},domProps:{value:e.readerName},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addUser(t)},input:function(t){t.target.composing||(e.readerName=t.target.value)}}}),a("button",{on:{click:e.addUser}},[e._v("Add")])]),a("div",{staticClass:"table-container"},[e.readers.length?a("Table",{attrs:{list:e.readers,name:"readers"}}):e._e()],1)]),a("div",{staticClass:"col"},[a("label",{attrs:{for:"new-book"}},[e._v("Add a Book:")]),a("div",{staticClass:"flex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.bookName,expression:"bookName"}],attrs:{id:"new-book",type:"text",placeholder:"Book Name..."},domProps:{value:e.bookName},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addBook(t)},input:function(t){t.target.composing||(e.bookName=t.target.value)}}}),a("button",{on:{click:e.addBook}},[e._v("Add")])]),a("div",{staticClass:"table-container"},[e.books.length?a("Table",{attrs:{list:e.books,name:"books"}}):e._e()],1)]),a("div",{staticClass:"col"},[a("label",{attrs:{for:"new-author"}},[e._v("Add an Author:")]),a("div",{staticClass:"flex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.authorName,expression:"authorName"}],attrs:{id:"new-author",type:"text",placeholder:"Author Name..."},domProps:{value:e.authorName},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addAuthor(t)},input:function(t){t.target.composing||(e.authorName=t.target.value)}}}),a("button",{on:{click:e.addAuthor}},[e._v("Add")])]),a("div",{staticClass:"table-container"},[e.authors.length?a("Table",{attrs:{list:e.authors,name:"authors"}}):e._e()],1)])])},p=[],h=(a("d3b7"),a("96cf"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"table"},[r("table",[r("tbody",[r("tr",[r("th",{attrs:{scope:"row"}},[e._v("Name")]),e._l(e.list,(function(t,o){return r("td",{key:o,staticClass:"name"},[r("span",{staticClass:"editable",attrs:{draggable:"books"===e.name||"authors"===e.name,id:o+e.name,spellcheck:"false"},on:{dragstart:function(a){return e.dragStart(a,t)},dragend:e.dragEnd,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enter(t)},input:e.oninput,blur:function(a){return e.blur(t)}}},[e._v(" "+e._s(t.name||t.firstName)+" ")]),r("svg",{staticClass:"edit-icon icon",attrs:{width:"20",height:"20"},on:{click:function(t){return t.stopPropagation(),e.startEditing(o)}}},[r("image",{attrs:{"xlink:href":a("6582"),width:"20",height:"20"}})])])}))],2),"readers"===e.name||"books"===e.name?r("tr",["readers"===e.name?r("th",{attrs:{scope:"row"}},[e._v("Books")]):e._e(),"books"===e.name?r("th",{attrs:{scope:"row"}},[e._v("Authors")]):e._e(),e._l(e.list,(function(t,o){return r("td",{key:o,staticClass:"target",on:{drop:function(a){return e.drop(a,t,o)},dragover:e.allowDrop}},[r("span",{staticClass:"droppable"},[e._v("Drop "+e._s("books"==e.name?"an Author":"a Book"))]),"readers"==e.name?e._l(t.books,(function(n,s){return r("span",{key:s,staticClass:"attach"},[e._v(" "+e._s(n.name)+" "),r("svg",{staticClass:"delete-icon icon",attrs:{width:"20",height:"20"},on:{click:function(a){return a.stopPropagation(),e.detachBookFromReader(t.id,o,s)}}},[r("image",{attrs:{"xlink:href":a("d739"),width:"20",height:"20"}})]),s!=t.books.length-1?r("hr"):e._e()])})):e._e(),"books"==e.name?e._l(t.authors,(function(n,s){return r("span",{key:s,staticClass:"attach"},[e._v(" "+e._s(n.firstName)+" "),r("svg",{staticClass:"delete-icon icon",attrs:{width:"20",height:"20"},on:{click:function(a){return a.stopPropagation(),e.detachAuthorFromBook(t.id,o,s)}}},[r("image",{attrs:{"xlink:href":a("d739"),width:"20",height:"20"}})]),s!=t.authors.length-1?r("hr"):e._e()])})):e._e()],2)}))],2):e._e()])]),e.message.length?r("p",{attrs:{id:"alert"}},[e._v(e._s(e.message))]):e._e()])}),m=[],f=(a("99af"),a("a434"),a("b0c0"),a("498a"),a("bc3a")),g=a.n(f),k=a("2f62");r["a"].use(k["a"]);var b=new k["a"].Store({state:{readerId:"",bookId:"",authorId:"",dragSrc:""},mutations:{setReaderId:function(e,t){e.readerId=t},setBookId:function(e,t){e.bookId=t},setAuthorId:function(e,t){e.authorId=t},setDragSrc:function(e,t){e.dragSrc=t}},actions:{setReaderId:function(e,t){var a=e.commit;a("setReaderId",t)},setBookId:function(e,t){var a=e.commit;a("setBookId",t)},setAuthorId:function(e,t){var a=e.commit;a("setAuthorId",t)},setDragSrc:function(e,t){var a=e.commit;a("setDragSrc",t)}},modules:{},getters:{readerId:function(e){return e.readerId},bookId:function(e){return e.bookId},authorId:function(e){return e.authorId},dragSrc:function(e){return e.dragSrc}}}),v=function(e){var t=e.operationType,a=e.operationName,r=e.payload,o=e.fieldsToGet;return g.a.post("https://shrouded-bastion-47607.herokuapp.com/graphql",{query:"\n      ".concat(t," {\n        ").concat(a,"(input: ").concat(r,") ").concat(o,"\n      }\n    ")})},y=function(e){var t=e.operationType,a=e.operationName,r=e.fieldsToGet;return g.a.post("https://shrouded-bastion-47607.herokuapp.com/graphql",{query:"\n      ".concat(t," {\n        ").concat(a," ").concat(r,"\n      }\n    ")})},N={props:["list","name"],store:b,data:function(){return{readerId:"",bookId:"",authorId:"",input:"",editables:[],message:""}},methods:{dragStart:function(e,t){e.currentTarget.style.backgroundColor="#EFBB35",e.currentTarget.style.color="#28313E",e.dataTransfer.setData("text/plain",e.target.id),e.dataTransfer.effectAllowed="move",this.$store.dispatch("setDragSrc",this.name),"books"===this.name&&this.$store.dispatch("setBookId",t.id),"authors"===this.name&&this.$store.dispatch("setAuthorId",t.id)},allowDrop:function(e){e.preventDefault()},drop:function(e,t,a){var r=this;if("books"==this.name&&"authors"!==this.$store.getters.dragSrc||"readers"==this.name&&"books"!==this.$store.getters.dragSrc)return this.message="Make sure to attach ".concat("books"==this.name?"an Author":"a Book"," to a ").concat(this.capitalize(this.name.slice(0,-1))),void setTimeout((function(){r.message=""}),3e3);var o=e.dataTransfer.getData("text/plain"),n=document.getElementById(o).cloneNode(!0);n.id="copy"+o,n.style.backgroundColor="transparent",n.style.color="#F59BAC",e.dataTransfer.clearData(),"readers"===this.name&&this.$store.dispatch("setReaderId",t.id),"books"===this.name&&this.$store.dispatch("setBookId",t.id),"books"===this.name?this.attachAuthorToBook(a):this.attachBookToReader(a)},dragEnd:function(e){e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color="#F59BAC"},startEditing:function(e){var t=document.getElementById(e+this.name);t.contentEditable=!0,setTimeout((function(){t.focus()}),0)},oninput:function(){this.input=event.srcElement.innerText.trim()},enter:function(e){e.preventDefault(),e.currentTarget.blur(),e.currentTarget.contentEditable=!1,this.updateName(+e.currentTarget.id[0])},blur:function(e){this.contentEditable=!1;var t=e.name||e.firstName;return t.trim(),e},attachBookToReader:function(e){var t,a,r,o,n;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return t="mutation",a="attachBookToReader",r='{bookId: "'.concat(this.$store.getters.bookId,'", readerId: "').concat(this.$store.getters.readerId,'"}'),o="{id, name, authors{id, firstName}}",s.next=6,regeneratorRuntime.awrap(v({operationName:a,operationType:t,payload:r,fieldsToGet:o}));case 6:n=s.sent,this.list[e].books.push(n.data.data.attachBookToReader);case 8:case"end":return s.stop()}}),null,this)},attachAuthorToBook:function(e){var t,a,r,o,n;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return t="mutation",a="attachAuthorToBook",r='{authorId: "'.concat(this.$store.getters.authorId,'", bookId: "').concat(this.$store.getters.bookId,'"}'),o="{id, firstName}",s.next=6,regeneratorRuntime.awrap(v({operationName:a,operationType:t,payload:r,fieldsToGet:o}));case 6:n=s.sent,this.list[e].authors.push(n.data.data.attachAuthorToBook);case 8:case"end":return s.stop()}}),null,this)},updateName:function(e){var t,a,r,o,n,s,i,c,u,d,l,p,h,m,f,g;return regeneratorRuntime.async((function(k){while(1)switch(k.prev=k.next){case 0:if(t=this.list[e],"books"!=this.name){k.next=12;break}return a="mutation",r="updateBookName",o='{id: "'.concat(t.id,'", name: "').concat(this.input,'"}'),n="{name, authors {firstName}}",k.next=8,regeneratorRuntime.awrap(v({operationName:r,operationType:a,payload:o,fieldsToGet:n}));case 8:s=k.sent,this.list[e].name=s.data.data.updateBookName.name,k.next=31;break;case 12:if("readers"!=this.name){k.next=23;break}return i="mutation",c="updateReaderName",u='{id: "'.concat(t.id,'", firstName: "').concat(this.input,'"}'),d="{firstName books {name, authors {firstName}}}",k.next=19,regeneratorRuntime.awrap(v({operationName:c,operationType:i,payload:u,fieldsToGet:d}));case 19:l=k.sent,this.list[e].firstName=l.data.data.updateReaderName.firstName,k.next=31;break;case 23:return p="mutation",h="updateAuthorName",m='{id: "'.concat(t.id,'", firstName: "').concat(this.input,'"}'),f="{firstName}",k.next=29,regeneratorRuntime.awrap(v({operationName:h,operationType:p,payload:m,fieldsToGet:f}));case 29:g=k.sent,this.list[e].firstName=g.data.data.updateAuthorName.firstName;case 31:case"end":return k.stop()}}),null,this)},detachBookFromReader:function(e,t,a){return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(v({operationType:"mutation",operationName:"detachBookFromReader",payload:'{readerId: "'.concat(e,'", bookId: "').concat(a,'"}'),fieldsToGet:"{books {id, name, authors {id, firstName}}}"}));case 2:r.sent,this.list[t].books.splice(a,1);case 4:case"end":return r.stop()}}),null,this)},detachAuthorFromBook:function(e,t,a){return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(v({operationType:"mutation",operationName:"detachAuthorFromBook",payload:'{authorId: "'.concat(a,'", bookId: "').concat(e,'"}'),fieldsToGet:"{authors {id, firstName}}"}));case 2:r.sent,this.list[t].authors.splice(a,1);case 4:case"end":return r.stop()}}),null,this)}}},w=N,T=(a("7e76"),Object(s["a"])(w,h,m,!1,null,"7603b641",null)),x=T.exports,_={name:"home",components:{Table:x},data:function(){return{readerName:"",bookName:"",authorName:"",readers:[],books:[],authors:[]}},mounted:function(){var e,t,a,r,o,n;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return e="query",t="getReaders",a="{id, firstName, books {id, name, authors {id, firstName}}}",s.next=5,regeneratorRuntime.awrap(this.gQueriesWithoutPayload({operationType:e,operationName:t,fieldsToGet:a}));case 5:return r=s.sent,this.readers=r.data.data.getReaders,t="getBooks",a="{id, name, authors {id, firstName}}",s.next=11,regeneratorRuntime.awrap(this.gQueriesWithoutPayload({operationType:e,operationName:t,fieldsToGet:a}));case 11:return o=s.sent,this.books=o.data.data.getBooks,t="getAuthors",a="{id, firstName}",s.next=17,regeneratorRuntime.awrap(this.gQueriesWithoutPayload({operationType:e,operationName:t,fieldsToGet:a}));case 17:n=s.sent,this.authors=n.data.data.getAuthors;case 19:case"end":return s.stop()}}),null,this)},methods:{addUser:function(){var e,t,a,r,o;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return e="mutation",t="createReader",a='{firstName: "'.concat(this.readerName,'"}'),r="{id, firstName, books {id}}",n.next=6,regeneratorRuntime.awrap(v({operationType:e,operationName:t,payload:a,fieldsToGet:r}));case 6:o=n.sent,this.readers.push(o.data.data.createReader),this.readerName="";case 9:case"end":return n.stop()}}),null,this)},addBook:function(){var e,t,a,r,o;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return e="mutation",t="createBook",a='{name: "'.concat(this.bookName,'"}'),r="{id, name, authors {id, firstName}}",n.next=6,regeneratorRuntime.awrap(v({operationType:e,operationName:t,payload:a,fieldsToGet:r}));case 6:o=n.sent,this.books.push(o.data.data.createBook),this.bookName="";case 9:case"end":return n.stop()}}),null,this)},addAuthor:function(){var e,t,a,r,o;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return e="mutation",t="createAuthor",a='{firstName: "'.concat(this.authorName,'"}'),r="{id, firstName}",n.next=6,regeneratorRuntime.awrap(v({operationType:e,operationName:t,payload:a,fieldsToGet:r}));case 6:o=n.sent,this.authors.push(o.data.data.createAuthor),this.authorName="";case 9:case"end":return n.stop()}}),null,this)},gQueriesWithoutPayload:function(e){var t=e.operationType,a=e.operationName,r=e.fieldsToGet;return y({operationType:t,operationName:a,fieldsToGet:r})}}},I=_,R=(a("c6e7"),Object(s["a"])(I,l,p,!1,null,"ca2aac60",null)),B=R.exports;r["a"].use(d["a"]);var A=[{path:"/",name:"home",component:B}],C=new d["a"]({routes:A}),E=C;r["a"].config.productionTip=!1,r["a"].prototype.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},new r["a"]({router:E,store:b,render:function(e){return e(u)}}).$mount("#app")},d739:function(e,t,a){e.exports=a.p+"img/delete.e204e045.svg"},f2c3:function(e,t,a){}});
//# sourceMappingURL=app.1bbb2fd2.js.map